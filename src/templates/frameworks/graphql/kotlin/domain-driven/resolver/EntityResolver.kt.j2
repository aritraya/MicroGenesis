package {{ base_package }}.resolver

import {{ base_package }}.domain.model.SampleEntity
import {{ base_package }}.application.SampleEntityService
{% if dto_pattern is defined and dto_pattern %}
import {{ base_package }}.dto.SampleEntityDto
import {{ base_package }}.mapper.SampleEntityMapper
{% endif %}
{% if framework == 'spring-boot' %}
import org.springframework.graphql.data.method.annotation.Argument
import org.springframework.graphql.data.method.annotation.MutationMapping
import org.springframework.graphql.data.method.annotation.QueryMapping
import org.springframework.stereotype.Controller
{% else %}
import io.micronaut.http.annotation.Controller
import graphql.GraphQL
import graphql.schema.DataFetcher
import jakarta.inject.Singleton
{% endif %}
import java.util.UUID

/**
 * GraphQL resolver for SampleEntity operations in a domain-driven architecture.
 *
 * In a domain-driven architecture, resolvers delegate to application services
 * which orchestrate domain operations. Resolvers should be thin and focused
 * on the GraphQL API specifics rather than business logic.
 *
 * Generated by MicroGenesis scaffolding tool.
 */
{% if framework == 'spring-boot' %}
@Controller
{% else %}
@Singleton
{% endif %}
class SampleEntityResolver(
    private val service: SampleEntityService{% if dto_pattern is defined and dto_pattern %},
    private val mapper: SampleEntityMapper{% endif %}
) {

    /**
     * Query to get all sample entities.
     *
     * @return list of all entities
     */
    {% if framework == 'spring-boot' %}
    @QueryMapping("sampleEntities")
    {% endif %}
    {% if dto_pattern is defined and dto_pattern %}
    fun findAll(): List<SampleEntityDto> {
        val entities = service.findAll()
        return entities.map { mapper.toDto(it) }
    }
    {% else %}
    fun findAll(): List<SampleEntity> {
        return service.findAll()
    }
    {% endif %}

    /**
     * Query to get a sample entity by ID.
     *
     * @param id entity ID
     * @return the entity if found, or null
     */
    {% if framework == 'spring-boot' %}
    @QueryMapping("sampleEntity")
    {% endif %}
    {% if dto_pattern is defined and dto_pattern %}
    fun findById(@Argument id: UUID): SampleEntityDto? {
        return service.findById(id)
            .map { mapper.toDto(it) }
            .orElse(null)
    }
    {% else %}
    fun findById(@Argument id: UUID): SampleEntity? {
        return service.findById(id).orElse(null)
    }
    {% endif %}

    /**
     * Mutation to create a new sample entity.
     *
     * @param input entity data to create
     * @return the created entity
     */
    {% if framework == 'spring-boot' %}
    @MutationMapping("createSampleEntity")
    {% endif %}
    {% if dto_pattern is defined and dto_pattern %}
    fun create(@Argument input: CreateSampleEntityInput): SampleEntityDto {
        val createdEntity = service.create(input.name, input.description)
        return mapper.toDto(createdEntity)
    }
    {% else %}
    fun create(@Argument input: CreateSampleEntityInput): SampleEntity {
        return service.create(input.name, input.description)
    }
    {% endif %}

    /**
     * Mutation to update an existing sample entity.
     *
     * @param id entity ID
     * @param input updated entity data
     * @return the updated entity if found, or null
     */
    {% if framework == 'spring-boot' %}
    @MutationMapping("updateSampleEntity")
    {% endif %}
    {% if dto_pattern is defined and dto_pattern %}
    fun update(@Argument id: UUID, @Argument input: UpdateSampleEntityInput): SampleEntityDto? {
        return service.update(id, input.name, input.description)
            .map { mapper.toDto(it) }
            .orElse(null)
    }
    {% else %}
    fun update(@Argument id: UUID, @Argument input: UpdateSampleEntityInput): SampleEntity? {
        return service.update(id, input.name, input.description).orElse(null)
    }
    {% endif %}

    /**
     * Mutation to delete a sample entity.
     *
     * @param id entity ID
     * @return true if deleted, false if not found
     */
    {% if framework == 'spring-boot' %}
    @MutationMapping("deleteSampleEntity")
    {% endif %}
    fun delete(@Argument id: UUID): Boolean {
        return service.deleteById(id)
    }
}

/**
 * Input type for creating a sample entity.
 */
data class CreateSampleEntityInput(
    val name: String,
    val description: String?
)

/**
 * Input type for updating a sample entity.
 */
data class UpdateSampleEntityInput(
    val name: String,
    val description: String?
)
