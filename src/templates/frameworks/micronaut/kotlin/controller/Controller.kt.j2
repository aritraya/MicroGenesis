package {{ base_package }}.controller

import {{ base_package }}.entity.SampleEntity
import {{ base_package }}.service.SampleEntityService
{% if dto_pattern is defined and dto_pattern %}
import {{ base_package }}.dto.SampleEntityDto
import {{ base_package }}.mapper.SampleEntityMapper
{% endif %}
import io.micronaut.http.HttpResponse
import io.micronaut.http.HttpStatus
import io.micronaut.http.annotation.*
import io.micronaut.validation.Validated
import java.util.UUID

/**
 * REST controller for SampleEntity operations.
 *
 * Generated by MicroGenesis scaffolding tool.
 */
@Controller("/api/sample-entities")
@Validated
class SampleEntityController(
    private val service: SampleEntityService{% if dto_pattern is defined and dto_pattern %},
    private val mapper: SampleEntityMapper{% endif %}
) {

    /**
     * Get all sample entities.
     *
     * @return list of all entities
     */
    @Get
    {% if dto_pattern is defined and dto_pattern %}
    fun findAll(): HttpResponse<List<SampleEntityDto>> {
        val entities = service.findAll()
        val dtos = entities.map { mapper.toDto(it) }
        return HttpResponse.ok(dtos)
    }
    {% else %}
    fun findAll(): HttpResponse<List<SampleEntity>> {
        return HttpResponse.ok(service.findAll())
    }
    {% endif %}

    /**
     * Get a sample entity by ID.
     *
     * @param id entity ID
     * @return the entity if found, or 404 Not Found
     */
    @Get("/{id}")
    {% if dto_pattern is defined and dto_pattern %}
    fun findById(id: UUID): HttpResponse<SampleEntityDto> {
        return service.findById(id)
            .map { mapper.toDto(it) }
            .map { HttpResponse.ok(it) }
            .orElse(HttpResponse.notFound())
    }
    {% else %}
    fun findById(id: UUID): HttpResponse<SampleEntity> {
        return service.findById(id)
            .map { HttpResponse.ok(it) }
            .orElse(HttpResponse.notFound())
    }
    {% endif %}

    /**
     * Create a new sample entity.
     *
     * @param entityData entity data to create
     * @return the created entity
     */
    @Post
    @Status(HttpStatus.CREATED)
    {% if dto_pattern is defined and dto_pattern %}
    fun create(@Body entityData: SampleEntityDto): HttpResponse<SampleEntityDto> {
        val entity = mapper.toEntity(entityData)
        val createdEntity = service.create(entity)
        return HttpResponse.created(mapper.toDto(createdEntity))
    }
    {% else %}
    fun create(@Body entity: SampleEntity): HttpResponse<SampleEntity> {
        val createdEntity = service.create(entity)
        return HttpResponse.created(createdEntity)
    }
    {% endif %}

    /**
     * Update an existing sample entity.
     *
     * @param id entity ID
     * @param entityData updated entity data
     * @return the updated entity if found, or 404 Not Found
     */
    @Put("/{id}")
    {% if dto_pattern is defined and dto_pattern %}
    fun update(id: UUID, @Body entityData: SampleEntityDto): HttpResponse<SampleEntityDto> {
        val entity = mapper.toEntity(entityData)
        return service.update(id, entity)
            .map { mapper.toDto(it) }
            .map { HttpResponse.ok(it) }
            .orElse(HttpResponse.notFound())
    }
    {% else %}
    fun update(id: UUID, @Body entity: SampleEntity): HttpResponse<SampleEntity> {
        return service.update(id, entity)
            .map { HttpResponse.ok(it) }
            .orElse(HttpResponse.notFound())
    }
    {% endif %}

    /**
     * Delete a sample entity.
     *
     * @param id entity ID
     * @return 204 No Content if deleted, or 404 Not Found
     */
    @Delete("/{id}")
    fun delete(id: UUID): HttpResponse<Void> {
        val deleted = service.deleteById(id)
        
        return if (deleted) {
            HttpResponse.noContent()
        } else {
            HttpResponse.notFound()
        }
    }
}
